# 常見反模式清單

撰寫完 Stories 後，逐一比對以下反模式。命中任何一項都應修正。

---

## 反模式 1：洩漏實作細節

**症狀：** Story 或驗收標準中出現具體技術名詞（框架名、服務名、API 路徑、資料庫結構）。

**壞：**
> 身為開發團隊，需要建立 Cloud Run API Proxy，使用 GCP Secret Manager 儲存 API Key，並設定 rate limiting per IP。

**好：**
> 所有 AI 教學工具的 API Key 不暴露在前端，且有基本的防濫用機制。

**判斷方式：** 把 Story 拿給非技術的利害關係人看，如果他們看不懂，就是洩漏了實作細節。

---

## 反模式 2：任務偽裝成 Story

**症狀：** 「身為開發者，我需要設定 ___」。這是一個任務（Task），不是 Story。

**壞：**
> 身為開發者，我需要設定 wildcard DNS，以便所有 subdomain 都能解析。

**好：**
> 身為老師，我需要透過好記的專屬網址（如 LessonHelp.nani.com.tw）存取工具，以便不需要記住複雜的 URL。

DNS 設定是支持這個 Story 的技術任務，不是 Story 本身。

---

## 反模式 3：模糊的受益者

**症狀：** 「身為用戶」「身為使用者」— 太泛，看不出是誰。

**壞：**
> 身為使用者，我需要系統能正常運作。

**好：**
> 身為國小老師，我需要在課堂上用手機開啟 AI 學習單生成器，以便即時製作當堂練習。

---

## 反模式 4：Feature-First（先講方案再找問題）

**症狀：** Story 直接描述一個功能或方案，而不是使用者要解決的問題。

**壞：**
> 身為管理者，我需要一個 dashboard，以便查看費用。

**好：**
> 身為管理者，我需要了解每個 AI 工具的使用費用，以便決定資源分配和預算規劃。

前者規定了方案（dashboard），後者描述了需求（了解費用），實作方式可以是 dashboard、定期報表、或 email 通知。

---

## 反模式 5：按技術層切分

**症狀：** Stories 按技術架構分層 — 一個前端 Story、一個後端 Story、一個資料庫 Story。

**壞：**
```
Story A: 建立後端 API proxy
Story B: 修改前端呼叫 proxy
Story C: 設定資料庫記錄用量
```

**好：**
```
Story: 老師使用 AI 工具時，系統安全地處理 API 請求且記錄用量
```

好的版本是一個端到端的切片，涵蓋所有技術層。

---

## 反模式 6：驗收標準規定 UI 設計

**症狀：** 驗收標準描述按鈕顏色、位置、字體等視覺細節。

**壞：**
> 費用報表頁面左上角有一個藍色的下載按鈕。

**好：**
> 管理者可以匯出費用報表。

---

## 反模式 7：所有 Story 都是 P0

**症狀：** 所有 Story 都標記為最高優先。

**修正：** 如果真的「每個都很重要」，那就按依賴關係強制排序 — 被依賴最多的排最前面。P0 不應超過總數的 30%。

---

## 快速掃描清單

對每個 Story 問以下問題，任一答「是」就需要修正：

- [ ] 是否出現了具體的技術名詞（Cloud Run, Redis, PostgreSQL...）？
- [ ] 受益者是否為「開發者」且沒有附帶價值陳述？
- [ ] 是否只有一種可能的實作方式？
- [ ] 是否按技術層而非使用者價值切分？
- [ ] 非技術人員是否看不懂？
- [ ] 驗收標準是否在描述「怎麼做」而非「做到什麼」？
